{
  "metadata": {
    "num_cases": 10,
    "concerns_per_case": 3,
    "types": [
      "fix",
      "style",
      "refactor"
    ],
    "allow_same_types": false,
    "seed": 42,
    "source_dataset": "datasets/candidates/codefuse-hqcm/dataset/test.json"
  },
  "cases": [
    {
      "tangleChange": "diff --git a/src/checkstyle/com/puppycrawl/tools/checkstyle/Checker.java b/src/checkstyle/com/puppycrawl/tools/checkstyle/Checker.java\nindex f87b9731d..d44934cbc 100644\n--- a/src/checkstyle/com/puppycrawl/tools/checkstyle/Checker.java\n+++ b/src/checkstyle/com/puppycrawl/tools/checkstyle/Checker.java\n@@ -18,7 +18,6 @@\n ////////////////////////////////////////////////////////////////////////////////\n package com.puppycrawl.tools.checkstyle;\n \n-\n import antlr.RecognitionException;\n import antlr.TokenStreamException;\n import java.io.File;\n\ndiff --git a/common/src/main/java/io/netty/util/internal/StringUtil.java b/common/src/main/java/io/netty/util/internal/StringUtil.java\nindex 4ede108..adbfeca 100644\n--- a/common/src/main/java/io/netty/util/internal/StringUtil.java\n+++ b/common/src/main/java/io/netty/util/internal/StringUtil.java\n@@ -329,7 +329,7 @@ public final class StringUtil {\n      *\n      * @param value The value which will be escaped according to\n      *              <a href=\"https://tools.ietf.org/html/rfc4180#section-2\">RFC-4180</a>\n-     * @return {@link CharSequence} the escaped value if nesessary, or the value unchanged\n+     * @return {@link CharSequence} the escaped value if necessary, or the value unchanged\n      */\n     public static CharSequence escapeCsv(CharSequence value) {\n         int length = checkNotNull(value, \"value\").length();\n@@ -354,7 +354,7 @@ public final class StringUtil {\n                     } else {\n                         boolean isNextCharDoubleQuote = isDoubleQuote(value.charAt(i + 1));\n                         if (!isDoubleQuote(value.charAt(i - 1)) &&\n-                                (!isNextCharDoubleQuote || isNextCharDoubleQuote && i + 1 == last)) {\n+                                (!isNextCharDoubleQuote || i + 1 == last)) {\n                             escaped.append(DOUBLE_QUOTE);\n                             escapedDoubleQuote = true;\n                         }\n\ndiff --git a/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java b/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java\nindex a1910b8..45a0a0c 100644\n--- a/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java\n+++ b/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java\n@@ -268,7 +268,7 @@ public class TransportIndexAction extends TransportShardReplicationOperationActi\n                 return;\n             }\n             documentMapper.refreshSource();\n-\n+            logger.debug(\"Sending mapping updated to master: index [{}] type [{}]\", request.index(), request.type());\n             mappingUpdatedAction.execute(new MappingUpdatedAction.MappingUpdatedRequest(request.index(), request.type(), documentMapper.mappingSource()), new ActionListener<MappingUpdatedAction.MappingUpdatedResponse>() {\n                 @Override\n                 public void onResponse(MappingUpdatedAction.MappingUpdatedResponse mappingUpdatedResponse) {\n",
      "atomicChanges": [
        {
          "change": "diff --git a/src/checkstyle/com/puppycrawl/tools/checkstyle/Checker.java b/src/checkstyle/com/puppycrawl/tools/checkstyle/Checker.java\nindex f87b9731d..d44934cbc 100644\n--- a/src/checkstyle/com/puppycrawl/tools/checkstyle/Checker.java\n+++ b/src/checkstyle/com/puppycrawl/tools/checkstyle/Checker.java\n@@ -18,7 +18,6 @@\n ////////////////////////////////////////////////////////////////////////////////\n package com.puppycrawl.tools.checkstyle;\n \n-\n import antlr.RecognitionException;\n import antlr.TokenStreamException;\n import java.io.File;\n",
          "label": "style"
        },
        {
          "change": "diff --git a/common/src/main/java/io/netty/util/internal/StringUtil.java b/common/src/main/java/io/netty/util/internal/StringUtil.java\nindex 4ede108..adbfeca 100644\n--- a/common/src/main/java/io/netty/util/internal/StringUtil.java\n+++ b/common/src/main/java/io/netty/util/internal/StringUtil.java\n@@ -329,7 +329,7 @@ public final class StringUtil {\n      *\n      * @param value The value which will be escaped according to\n      *              <a href=\"https://tools.ietf.org/html/rfc4180#section-2\">RFC-4180</a>\n-     * @return {@link CharSequence} the escaped value if nesessary, or the value unchanged\n+     * @return {@link CharSequence} the escaped value if necessary, or the value unchanged\n      */\n     public static CharSequence escapeCsv(CharSequence value) {\n         int length = checkNotNull(value, \"value\").length();\n@@ -354,7 +354,7 @@ public final class StringUtil {\n                     } else {\n                         boolean isNextCharDoubleQuote = isDoubleQuote(value.charAt(i + 1));\n                         if (!isDoubleQuote(value.charAt(i - 1)) &&\n-                                (!isNextCharDoubleQuote || isNextCharDoubleQuote && i + 1 == last)) {\n+                                (!isNextCharDoubleQuote || i + 1 == last)) {\n                             escaped.append(DOUBLE_QUOTE);\n                             escapedDoubleQuote = true;\n                         }\n",
          "label": "fix"
        },
        {
          "change": "diff --git a/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java b/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java\nindex a1910b8..45a0a0c 100644\n--- a/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java\n+++ b/src/main/java/org/elasticsearch/action/index/TransportIndexAction.java\n@@ -268,7 +268,7 @@ public class TransportIndexAction extends TransportShardReplicationOperationActi\n                 return;\n             }\n             documentMapper.refreshSource();\n-\n+            logger.debug(\"Sending mapping updated to master: index [{}] type [{}]\", request.index(), request.type());\n             mappingUpdatedAction.execute(new MappingUpdatedAction.MappingUpdatedRequest(request.index(), request.type(), documentMapper.mappingSource()), new ActionListener<MappingUpdatedAction.MappingUpdatedResponse>() {\n                 @Override\n                 public void onResponse(MappingUpdatedAction.MappingUpdatedResponse mappingUpdatedResponse) {\n",
          "label": "refactor"
        }
      ]
    },
    {
      "tangleChange": "diff --git a/components/camel-jms/src/main/java/org/apache/camel/component/jms/JmsProducer.java b/components/camel-jms/src/main/java/org/apache/camel/component/jms/JmsProducer.java\nindex 8329372811..f3427b3d1a 100644\n--- a/components/camel-jms/src/main/java/org/apache/camel/component/jms/JmsProducer.java\n+++ b/components/camel-jms/src/main/java/org/apache/camel/component/jms/JmsProducer.java\n@@ -382,7 +382,7 @@ public class JmsProducer extends DefaultProducer {\n         if (exchange.hasOut()) {\n             JmsMessage out = (JmsMessage) exchange.getOut();\n             try {\n-                if (out != null) {\n+                if (out != null && out.getJmsMessage() != null) {\n                     out.setMessageId(out.getJmsMessage().getJMSMessageID());\n                 }\n             } catch (JMSException e) {\n\ndiff --git a/src/com/fsck/k9/activity/MessageList.java b/src/com/fsck/k9/activity/MessageList.java\nindex d68a7e0..ffa6a0a 100644\n--- a/src/com/fsck/k9/activity/MessageList.java\n+++ b/src/com/fsck/k9/activity/MessageList.java\n@@ -2378,7 +2378,7 @@ public class MessageList extends K9ListActivity implements\n     }\n \n     private void toggleAllSelected() {\n-\tboolean newState = true;\n+        boolean newState = true;\n \n         synchronized (mAdapter.messages) {\n             if (mSelectedCount > 0) {\n@@ -2939,9 +2939,9 @@ public class MessageList extends K9ListActivity implements\n \t            break;\n \t        }\n \t        case R.id.same_sender: {\n-\t            MessageList.actionHandle(MessageList.this, \"From \" + selection.get(0).sender,\n-\t\t\t\tselection.get(0).senderAddress, false, null, null);\n-\t\t\t\tmSelectedCount = 0;\n+                MessageList.actionHandle(MessageList.this, \"From \" + selection.get(0).sender,\n+                    selection.get(0).senderAddress, false, null, null);\n+                mSelectedCount = 0;\n \t            break;\n \t        }\n \t\t\t}\n\ndiff --git a/logging/src/main/java/org/jboss/as/logging/LoggingConfigurationProcessor.java b/logging/src/main/java/org/jboss/as/logging/LoggingConfigurationProcessor.java\nindex 2626a3d463..51f7835630 100644\n--- a/logging/src/main/java/org/jboss/as/logging/LoggingConfigurationProcessor.java\n+++ b/logging/src/main/java/org/jboss/as/logging/LoggingConfigurationProcessor.java\n@@ -153,9 +153,7 @@ public class LoggingConfigurationProcessor implements DeploymentUnitProcessor {\n      * Preference is for {@literal logging.properties} or {@literal jboss-logging.properties}.\n      *\n      * @param resourceRoot the resource to check.\n-     *\n      * @return the configuration file if found, otherwise {@code null}.\n-     *\n      * @throws DeploymentUnitProcessingException\n      *          if an error occurs.\n      */\n@@ -203,7 +201,7 @@ public class LoggingConfigurationProcessor implements DeploymentUnitProcessor {\n \n         @Override\n         public boolean accepts(final VirtualFile file) {\n-            return file.isDirectory() || configFiles.contains(file.getName());\n+            return configFiles.contains(file.getName());\n         }\n     }\n }\n",
      "atomicChanges": [
        {
          "change": "diff --git a/components/camel-jms/src/main/java/org/apache/camel/component/jms/JmsProducer.java b/components/camel-jms/src/main/java/org/apache/camel/component/jms/JmsProducer.java\nindex 8329372811..f3427b3d1a 100644\n--- a/components/camel-jms/src/main/java/org/apache/camel/component/jms/JmsProducer.java\n+++ b/components/camel-jms/src/main/java/org/apache/camel/component/jms/JmsProducer.java\n@@ -382,7 +382,7 @@ public class JmsProducer extends DefaultProducer {\n         if (exchange.hasOut()) {\n             JmsMessage out = (JmsMessage) exchange.getOut();\n             try {\n-                if (out != null) {\n+                if (out != null && out.getJmsMessage() != null) {\n                     out.setMessageId(out.getJmsMessage().getJMSMessageID());\n                 }\n             } catch (JMSException e) {\n",
          "label": "fix"
        },
        {
          "change": "diff --git a/src/com/fsck/k9/activity/MessageList.java b/src/com/fsck/k9/activity/MessageList.java\nindex d68a7e0..ffa6a0a 100644\n--- a/src/com/fsck/k9/activity/MessageList.java\n+++ b/src/com/fsck/k9/activity/MessageList.java\n@@ -2378,7 +2378,7 @@ public class MessageList extends K9ListActivity implements\n     }\n \n     private void toggleAllSelected() {\n-\tboolean newState = true;\n+        boolean newState = true;\n \n         synchronized (mAdapter.messages) {\n             if (mSelectedCount > 0) {\n@@ -2939,9 +2939,9 @@ public class MessageList extends K9ListActivity implements\n \t            break;\n \t        }\n \t        case R.id.same_sender: {\n-\t            MessageList.actionHandle(MessageList.this, \"From \" + selection.get(0).sender,\n-\t\t\t\tselection.get(0).senderAddress, false, null, null);\n-\t\t\t\tmSelectedCount = 0;\n+                MessageList.actionHandle(MessageList.this, \"From \" + selection.get(0).sender,\n+                    selection.get(0).senderAddress, false, null, null);\n+                mSelectedCount = 0;\n \t            break;\n \t        }\n \t\t\t}\n",
          "label": "style"
        },
        {
          "change": "diff --git a/logging/src/main/java/org/jboss/as/logging/LoggingConfigurationProcessor.java b/logging/src/main/java/org/jboss/as/logging/LoggingConfigurationProcessor.java\nindex 2626a3d463..51f7835630 100644\n--- a/logging/src/main/java/org/jboss/as/logging/LoggingConfigurationProcessor.java\n+++ b/logging/src/main/java/org/jboss/as/logging/LoggingConfigurationProcessor.java\n@@ -153,9 +153,7 @@ public class LoggingConfigurationProcessor implements DeploymentUnitProcessor {\n      * Preference is for {@literal logging.properties} or {@literal jboss-logging.properties}.\n      *\n      * @param resourceRoot the resource to check.\n-     *\n      * @return the configuration file if found, otherwise {@code null}.\n-     *\n      * @throws DeploymentUnitProcessingException\n      *          if an error occurs.\n      */\n@@ -203,7 +201,7 @@ public class LoggingConfigurationProcessor implements DeploymentUnitProcessor {\n \n         @Override\n         public boolean accepts(final VirtualFile file) {\n-            return file.isDirectory() || configFiles.contains(file.getName());\n+            return configFiles.contains(file.getName());\n         }\n     }\n }\n",
          "label": "refactor"
        }
      ]
    },
    {
      "tangleChange": "diff --git a/services/core/java/com/android/server/am/ActivityManagerService.java b/services/core/java/com/android/server/am/ActivityManagerService.java\nindex 79cb60e..a435de7 100755\n--- a/services/core/java/com/android/server/am/ActivityManagerService.java\n+++ b/services/core/java/com/android/server/am/ActivityManagerService.java\n@@ -8054,7 +8054,7 @@ public final class ActivityManagerService extends ActivityManagerNative\n                 checkedGrants = true;\n             }\n             userId = handleIncomingUser(callingPid, callingUid, userId,\n-                    false, ALLOW_NON_FULL_IN_PROFILE,\n+                    false, ALLOW_NON_FULL,\n                     \"checkContentProviderPermissionLocked \" + cpi.authority, null);\n             if (userId != tmpTargetUserId) {\n                 // When we actually went to determine the final targer user ID, this ended\n\ndiff --git a/style_example.py b/style_example.py\nindex 73be197..6935954 100644\n--- a/style_example.py\n+++ b/style_example.py\n@@ -1,12 +1,15 @@\n def style_example():\n- print(\"This is a poorly styled function.\")\n+    print(\"This is a poorly styled function.\")\n  \n- if 1 < 2:\n- print(\"One is less than two.\")\n- elif 2 < 3:\n- print(\"Two is less than three.\")\n+    if 1 < 2:\n+        print(\"One is less than two.\")\n+    elif 2 < 3:\n+        print(\"Two is less than three.\")\n  \n- #This is a comment.\n- #This is another comment.\n+    # This is a comment.\n+    # This is another comment.\n  \n #This is a standalone comment.\n+    # This is a standalone comment.\n+\n+style_example()\ndiff --git a/src/edu/stanford/nlp/process/PTBTokenizer.java b/src/edu/stanford/nlp/process/PTBTokenizer.java\nindex 4880c43..b00953c 100644\n--- a/src/edu/stanford/nlp/process/PTBTokenizer.java\n+++ b/src/edu/stanford/nlp/process/PTBTokenizer.java\n@@ -163,7 +163,7 @@ import edu.stanford.nlp.util.StringUtils;\n public class PTBTokenizer<T extends HasWord> extends AbstractTokenizer<T> {\n \n   // the underlying lexer\n-  private PTBLexer lexer;\n+  private final PTBLexer lexer;\n \n \n   /**\n@@ -183,7 +183,7 @@ public class PTBTokenizer<T extends HasWord> extends AbstractTokenizer<T> {\n    * Constructs a new PTBTokenizer that makes CoreLabel tokens.\n    * It optionally returns carriage returns\n    * as their own token. CRs come back as Words whose text is\n-   * the value of <code>PTBLexer.NEWLINE_TOKEN</code>.\n+   * the value of {@code PTBLexer.NEWLINE_TOKEN}.\n    *\n    * @param r The Reader to read tokens from\n    * @param tokenizeNLs Whether to return newlines as separate tokens\n@@ -202,7 +202,7 @@ public class PTBTokenizer<T extends HasWord> extends AbstractTokenizer<T> {\n    * Constructs a new PTBTokenizer that optionally returns carriage returns\n    * as their own token, and has a custom LexedTokenFactory.\n    * If asked for, CRs come back as Words whose text is\n-   * the value of <code>PTBLexer.cr</code>.  This constructor translates\n+   * the value of {@code PTBLexer.cr}.  This constructor translates\n    * between the traditional boolean options of PTBTokenizer and the new\n    * options String.\n    *\n",
      "atomicChanges": [
        {
          "change": "diff --git a/services/core/java/com/android/server/am/ActivityManagerService.java b/services/core/java/com/android/server/am/ActivityManagerService.java\nindex 79cb60e..a435de7 100755\n--- a/services/core/java/com/android/server/am/ActivityManagerService.java\n+++ b/services/core/java/com/android/server/am/ActivityManagerService.java\n@@ -8054,7 +8054,7 @@ public final class ActivityManagerService extends ActivityManagerNative\n                 checkedGrants = true;\n             }\n             userId = handleIncomingUser(callingPid, callingUid, userId,\n-                    false, ALLOW_NON_FULL_IN_PROFILE,\n+                    false, ALLOW_NON_FULL,\n                     \"checkContentProviderPermissionLocked \" + cpi.authority, null);\n             if (userId != tmpTargetUserId) {\n                 // When we actually went to determine the final targer user ID, this ended\n",
          "label": "fix"
        },
        {
          "change": "diff --git a/style_example.py b/style_example.py\nindex 73be197..6935954 100644\n--- a/style_example.py\n+++ b/style_example.py\n@@ -1,12 +1,15 @@\n def style_example():\n- print(\"This is a poorly styled function.\")\n+    print(\"This is a poorly styled function.\")\n  \n- if 1 < 2:\n- print(\"One is less than two.\")\n- elif 2 < 3:\n- print(\"Two is less than three.\")\n+    if 1 < 2:\n+        print(\"One is less than two.\")\n+    elif 2 < 3:\n+        print(\"Two is less than three.\")\n  \n- #This is a comment.\n- #This is another comment.\n+    # This is a comment.\n+    # This is another comment.\n  \n #This is a standalone comment.\n+    # This is a standalone comment.\n+\n+style_example()",
          "label": "style"
        },
        {
          "change": "diff --git a/src/edu/stanford/nlp/process/PTBTokenizer.java b/src/edu/stanford/nlp/process/PTBTokenizer.java\nindex 4880c43..b00953c 100644\n--- a/src/edu/stanford/nlp/process/PTBTokenizer.java\n+++ b/src/edu/stanford/nlp/process/PTBTokenizer.java\n@@ -163,7 +163,7 @@ import edu.stanford.nlp.util.StringUtils;\n public class PTBTokenizer<T extends HasWord> extends AbstractTokenizer<T> {\n \n   // the underlying lexer\n-  private PTBLexer lexer;\n+  private final PTBLexer lexer;\n \n \n   /**\n@@ -183,7 +183,7 @@ public class PTBTokenizer<T extends HasWord> extends AbstractTokenizer<T> {\n    * Constructs a new PTBTokenizer that makes CoreLabel tokens.\n    * It optionally returns carriage returns\n    * as their own token. CRs come back as Words whose text is\n-   * the value of <code>PTBLexer.NEWLINE_TOKEN</code>.\n+   * the value of {@code PTBLexer.NEWLINE_TOKEN}.\n    *\n    * @param r The Reader to read tokens from\n    * @param tokenizeNLs Whether to return newlines as separate tokens\n@@ -202,7 +202,7 @@ public class PTBTokenizer<T extends HasWord> extends AbstractTokenizer<T> {\n    * Constructs a new PTBTokenizer that optionally returns carriage returns\n    * as their own token, and has a custom LexedTokenFactory.\n    * If asked for, CRs come back as Words whose text is\n-   * the value of <code>PTBLexer.cr</code>.  This constructor translates\n+   * the value of {@code PTBLexer.cr}.  This constructor translates\n    * between the traditional boolean options of PTBTokenizer and the new\n    * options String.\n    *\n",
          "label": "refactor"
        }
      ]
    },
    {
      "tangleChange": "diff --git a/jphp-runtime/src/php/runtime/invoke/InvokeHelper.java b/jphp-runtime/src/php/runtime/invoke/InvokeHelper.java\nindex a4a4ef68..11fc8c3c 100644\n--- a/jphp-runtime/src/php/runtime/invoke/InvokeHelper.java\n+++ b/jphp-runtime/src/php/runtime/invoke/InvokeHelper.java\n@@ -70,7 +70,7 @@ final public class InvokeHelper {\n     public static Memory[] makeArguments(Environment env, Memory[] args,\n                                        ParameterEntity[] parameters,\n                                        String originClassName, String originMethodName,\n-                                       TraceInfo trace){\n+                                       TraceInfo trace) {\n         return InvokeArgumentHelper.makeArguments(env, args, parameters, originClassName, originMethodName, trace);\n     }\n \n\ndiff --git a/services/core/java/com/android/server/pm/PackageManagerService.java b/services/core/java/com/android/server/pm/PackageManagerService.java\nindex 27ca62af..a7bd4ab 100644\n--- a/services/core/java/com/android/server/pm/PackageManagerService.java\n+++ b/services/core/java/com/android/server/pm/PackageManagerService.java\n@@ -16341,8 +16341,9 @@ public class PackageManagerService extends IPackageManager.Stub {\n                 for (int curUser : users) {\n                     long timeout = SystemClock.uptimeMillis() + 5000;\n                     synchronized (conn) {\n-                        long now = SystemClock.uptimeMillis();\n-                        while (conn.mContainerService == null && now < timeout) {\n+                        long now;\n+                        while (conn.mContainerService == null &&\n+                                (now = SystemClock.uptimeMillis()) < timeout) {\n                             try {\n                                 conn.wait(timeout - now);\n                             } catch (InterruptedException e) {\n\ndiff --git a/python/educational/interactive-learning/src/com/jetbrains/edu/learning/courseGeneration/StudyProjectGenerator.java b/python/educational/interactive-learning/src/com/jetbrains/edu/learning/courseGeneration/StudyProjectGenerator.java\nindex e3d6b9f..82eb8ea 100644\n--- a/python/educational/interactive-learning/src/com/jetbrains/edu/learning/courseGeneration/StudyProjectGenerator.java\n+++ b/python/educational/interactive-learning/src/com/jetbrains/edu/learning/courseGeneration/StudyProjectGenerator.java\n@@ -47,7 +47,7 @@ public class StudyProjectGenerator {\n   private static final String CACHE_NAME = \"courseNames.txt\";\n   private List<CourseInfo> myCourses = new ArrayList<CourseInfo>();\n   private CourseInfo mySelectedCourseInfo;\n-  private static final Pattern CACHE_PATTERN = Pattern.compile(\"name=(.*) description=(.*) folder=(.*) (instructor=(.*))+\");\n+  private static final Pattern CACHE_PATTERN = Pattern.compile(\"name=(.*) description=(.*) folder=(.*) (instructor=(.*))*\");\n   private static final String COURSE_META_FILE = \"course.json\";\n   private static final String COURSE_NAME_ATTRIBUTE = \"name\";\n   private static final String COURSE_DESCRIPTION = \"description\";\n",
      "atomicChanges": [
        {
          "change": "diff --git a/jphp-runtime/src/php/runtime/invoke/InvokeHelper.java b/jphp-runtime/src/php/runtime/invoke/InvokeHelper.java\nindex a4a4ef68..11fc8c3c 100644\n--- a/jphp-runtime/src/php/runtime/invoke/InvokeHelper.java\n+++ b/jphp-runtime/src/php/runtime/invoke/InvokeHelper.java\n@@ -70,7 +70,7 @@ final public class InvokeHelper {\n     public static Memory[] makeArguments(Environment env, Memory[] args,\n                                        ParameterEntity[] parameters,\n                                        String originClassName, String originMethodName,\n-                                       TraceInfo trace){\n+                                       TraceInfo trace) {\n         return InvokeArgumentHelper.makeArguments(env, args, parameters, originClassName, originMethodName, trace);\n     }\n \n",
          "label": "style"
        },
        {
          "change": "diff --git a/services/core/java/com/android/server/pm/PackageManagerService.java b/services/core/java/com/android/server/pm/PackageManagerService.java\nindex 27ca62af..a7bd4ab 100644\n--- a/services/core/java/com/android/server/pm/PackageManagerService.java\n+++ b/services/core/java/com/android/server/pm/PackageManagerService.java\n@@ -16341,8 +16341,9 @@ public class PackageManagerService extends IPackageManager.Stub {\n                 for (int curUser : users) {\n                     long timeout = SystemClock.uptimeMillis() + 5000;\n                     synchronized (conn) {\n-                        long now = SystemClock.uptimeMillis();\n-                        while (conn.mContainerService == null && now < timeout) {\n+                        long now;\n+                        while (conn.mContainerService == null &&\n+                                (now = SystemClock.uptimeMillis()) < timeout) {\n                             try {\n                                 conn.wait(timeout - now);\n                             } catch (InterruptedException e) {\n",
          "label": "fix"
        },
        {
          "change": "diff --git a/python/educational/interactive-learning/src/com/jetbrains/edu/learning/courseGeneration/StudyProjectGenerator.java b/python/educational/interactive-learning/src/com/jetbrains/edu/learning/courseGeneration/StudyProjectGenerator.java\nindex e3d6b9f..82eb8ea 100644\n--- a/python/educational/interactive-learning/src/com/jetbrains/edu/learning/courseGeneration/StudyProjectGenerator.java\n+++ b/python/educational/interactive-learning/src/com/jetbrains/edu/learning/courseGeneration/StudyProjectGenerator.java\n@@ -47,7 +47,7 @@ public class StudyProjectGenerator {\n   private static final String CACHE_NAME = \"courseNames.txt\";\n   private List<CourseInfo> myCourses = new ArrayList<CourseInfo>();\n   private CourseInfo mySelectedCourseInfo;\n-  private static final Pattern CACHE_PATTERN = Pattern.compile(\"name=(.*) description=(.*) folder=(.*) (instructor=(.*))+\");\n+  private static final Pattern CACHE_PATTERN = Pattern.compile(\"name=(.*) description=(.*) folder=(.*) (instructor=(.*))*\");\n   private static final String COURSE_META_FILE = \"course.json\";\n   private static final String COURSE_NAME_ATTRIBUTE = \"name\";\n   private static final String COURSE_DESCRIPTION = \"description\";\n",
          "label": "refactor"
        }
      ]
    },
    {
      "tangleChange": "diff --git a/src/java/org/jivesoftware/openfire/roster/RosterItemProvider.java b/src/java/org/jivesoftware/openfire/roster/RosterItemProvider.java\nindex 2cac9aafa..3fa7798ed 100644\n--- a/src/java/org/jivesoftware/openfire/roster/RosterItemProvider.java\n+++ b/src/java/org/jivesoftware/openfire/roster/RosterItemProvider.java\n@@ -88,9 +88,8 @@ public class RosterItemProvider {\n         Connection con = null;\r\n         PreparedStatement pstmt = null;\r\n         try {\r\n-            con = DbConnectionManager.getConnection();\r\n-\r\n             long rosterID = SequenceManager.nextID(JiveConstants.ROSTER);\r\n+            con = DbConnectionManager.getConnection();\r\n             pstmt = con.prepareStatement(CREATE_ROSTER_ITEM);\r\n             pstmt.setString(1, username);\r\n             pstmt.setLong(2, rosterID);\r\n\ndiff --git a/src/checkstyle/com/puppycrawl/tools/checkstyle/Checker.java b/src/checkstyle/com/puppycrawl/tools/checkstyle/Checker.java\nindex f87b9731d..d44934cbc 100644\n--- a/src/checkstyle/com/puppycrawl/tools/checkstyle/Checker.java\n+++ b/src/checkstyle/com/puppycrawl/tools/checkstyle/Checker.java\n@@ -18,7 +18,6 @@\n ////////////////////////////////////////////////////////////////////////////////\n package com.puppycrawl.tools.checkstyle;\n \n-\n import antlr.RecognitionException;\n import antlr.TokenStreamException;\n import java.io.File;\n\ndiff --git a/byte-buddy-dep/src/main/java/net/bytebuddy/dynamic/ClassFileLocator.java b/byte-buddy-dep/src/main/java/net/bytebuddy/dynamic/ClassFileLocator.java\nindex 40161a7be6..2ef10b9081 100644\n--- a/byte-buddy-dep/src/main/java/net/bytebuddy/dynamic/ClassFileLocator.java\n+++ b/byte-buddy-dep/src/main/java/net/bytebuddy/dynamic/ClassFileLocator.java\n@@ -318,10 +318,15 @@ public interface ClassFileLocator extends Closeable {\n          */\n         public static Resolution read(Class<?> type) {\n             try {\n-                ClassLoader classLoader = type.getClassLoader();\n-                return locate(classLoader == null\n-                        ? ClassLoader.getSystemClassLoader()\n-                        : classLoader, TypeDescription.ForLoadedType.getName(type));\n+                JavaModule module = JavaModule.ofType(type);\n+                if (module == null || !module.isNamed()) {\n+                    return ForModule.locate(module, TypeDescription.ForLoadedType.getName(type));\n+                } else {\n+                    ClassLoader classLoader = type.getClassLoader();\n+                    return locate(classLoader == null\n+                            ? ClassLoader.getSystemClassLoader()\n+                            : classLoader, TypeDescription.ForLoadedType.getName(type));\n+                }\n             } catch (IOException exception) {\n                 throw new IllegalStateException(\"Cannot read class file for \" + type, exception);\n             }\n",
      "atomicChanges": [
        {
          "change": "diff --git a/src/java/org/jivesoftware/openfire/roster/RosterItemProvider.java b/src/java/org/jivesoftware/openfire/roster/RosterItemProvider.java\nindex 2cac9aafa..3fa7798ed 100644\n--- a/src/java/org/jivesoftware/openfire/roster/RosterItemProvider.java\n+++ b/src/java/org/jivesoftware/openfire/roster/RosterItemProvider.java\n@@ -88,9 +88,8 @@ public class RosterItemProvider {\n         Connection con = null;\r\n         PreparedStatement pstmt = null;\r\n         try {\r\n-            con = DbConnectionManager.getConnection();\r\n-\r\n             long rosterID = SequenceManager.nextID(JiveConstants.ROSTER);\r\n+            con = DbConnectionManager.getConnection();\r\n             pstmt = con.prepareStatement(CREATE_ROSTER_ITEM);\r\n             pstmt.setString(1, username);\r\n             pstmt.setLong(2, rosterID);\r\n",
          "label": "fix"
        },
        {
          "change": "diff --git a/src/checkstyle/com/puppycrawl/tools/checkstyle/Checker.java b/src/checkstyle/com/puppycrawl/tools/checkstyle/Checker.java\nindex f87b9731d..d44934cbc 100644\n--- a/src/checkstyle/com/puppycrawl/tools/checkstyle/Checker.java\n+++ b/src/checkstyle/com/puppycrawl/tools/checkstyle/Checker.java\n@@ -18,7 +18,6 @@\n ////////////////////////////////////////////////////////////////////////////////\n package com.puppycrawl.tools.checkstyle;\n \n-\n import antlr.RecognitionException;\n import antlr.TokenStreamException;\n import java.io.File;\n",
          "label": "style"
        },
        {
          "change": "diff --git a/byte-buddy-dep/src/main/java/net/bytebuddy/dynamic/ClassFileLocator.java b/byte-buddy-dep/src/main/java/net/bytebuddy/dynamic/ClassFileLocator.java\nindex 40161a7be6..2ef10b9081 100644\n--- a/byte-buddy-dep/src/main/java/net/bytebuddy/dynamic/ClassFileLocator.java\n+++ b/byte-buddy-dep/src/main/java/net/bytebuddy/dynamic/ClassFileLocator.java\n@@ -318,10 +318,15 @@ public interface ClassFileLocator extends Closeable {\n          */\n         public static Resolution read(Class<?> type) {\n             try {\n-                ClassLoader classLoader = type.getClassLoader();\n-                return locate(classLoader == null\n-                        ? ClassLoader.getSystemClassLoader()\n-                        : classLoader, TypeDescription.ForLoadedType.getName(type));\n+                JavaModule module = JavaModule.ofType(type);\n+                if (module == null || !module.isNamed()) {\n+                    return ForModule.locate(module, TypeDescription.ForLoadedType.getName(type));\n+                } else {\n+                    ClassLoader classLoader = type.getClassLoader();\n+                    return locate(classLoader == null\n+                            ? ClassLoader.getSystemClassLoader()\n+                            : classLoader, TypeDescription.ForLoadedType.getName(type));\n+                }\n             } catch (IOException exception) {\n                 throw new IllegalStateException(\"Cannot read class file for \" + type, exception);\n             }\n",
          "label": "refactor"
        }
      ]
    },
    {
      "tangleChange": "diff --git a/library/src/se/emilsjolander/stickylistheaders/StickyListHeadersListView.java b/library/src/se/emilsjolander/stickylistheaders/StickyListHeadersListView.java\nindex 1030114..ecccdc5 100644\n--- a/library/src/se/emilsjolander/stickylistheaders/StickyListHeadersListView.java\n+++ b/library/src/se/emilsjolander/stickylistheaders/StickyListHeadersListView.java\n@@ -503,9 +503,7 @@ public class StickyListHeadersListView extends FrameLayout {\n \tprivate int getHeaderOverlap(int position) {\n \t\tboolean isStartOfSection = isStartOfSection(position);\n \t\tif (!isStartOfSection) {\n-\t\t\tView header = mAdapter.getHeaderView(position, null, mList);\n-\t\t\theader.setLayoutParams(new ViewGroup.LayoutParams(\n-\t\t\t\t\tLayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));\n+\t\t\tView header = mAdapter.getView(position, null, mList);\n \n \t\t\tfinal int width = getWidth();\n \t\t\tfinal int parentWidthMeasureSpec = MeasureSpec.makeMeasureSpec(\n\ndiff --git a/OsmAnd/src/net/osmand/plus/dashboard/DashFavoritesFragment.java b/OsmAnd/src/net/osmand/plus/dashboard/DashFavoritesFragment.java\nindex 6e104d6e79..2dd93a97b3 100644\n--- a/OsmAnd/src/net/osmand/plus/dashboard/DashFavoritesFragment.java\n+++ b/OsmAnd/src/net/osmand/plus/dashboard/DashFavoritesFragment.java\n@@ -87,7 +87,7 @@ public class DashFavoritesFragment extends DashBaseFragment {\n \n \n \n-\tprivate void setupFavorites(){\n+\tpublic void setupFavorites(){\n \t\tView mainView = getView();\n \t\tfinal FavouritesDbHelper helper = getMyApplication().getFavorites();\n \t\tpoints = new ArrayList<FavouritePoint>(helper.getFavouritePoints());\n\ndiff --git a/src/main/java/org/bukkit/command/defaults/GameModeCommand.java b/src/main/java/org/bukkit/command/defaults/GameModeCommand.java\nindex 08e5a90a..ad445160 100644\n--- a/src/main/java/org/bukkit/command/defaults/GameModeCommand.java\n+++ b/src/main/java/org/bukkit/command/defaults/GameModeCommand.java\n@@ -58,9 +58,9 @@ public class GameModeCommand extends VanillaCommand {\n                     sender.sendMessage(\"Game mode change for \" + player.getName() + \" failed!\");\n                 } else {\n                     if (player == sender) {\n-                        Command.broadcastCommandMessage(sender, \"Set own game mode to\" + mode.toString() + \" mode\", false);\n+                        Command.broadcastCommandMessage(sender, \"Set own game mode to \" + mode.toString() + \" mode\", false);\n                     } else {\n-                        Command.broadcastCommandMessage(sender, \"Set \" + player.getName() + \"'s game mode to\" + mode.toString() + \" mode\", false);\n+                        Command.broadcastCommandMessage(sender, \"Set \" + player.getName() + \"'s game mode to \" + mode.toString() + \" mode\", false);\n                     }\n                 }\n             } else {\n",
      "atomicChanges": [
        {
          "change": "diff --git a/library/src/se/emilsjolander/stickylistheaders/StickyListHeadersListView.java b/library/src/se/emilsjolander/stickylistheaders/StickyListHeadersListView.java\nindex 1030114..ecccdc5 100644\n--- a/library/src/se/emilsjolander/stickylistheaders/StickyListHeadersListView.java\n+++ b/library/src/se/emilsjolander/stickylistheaders/StickyListHeadersListView.java\n@@ -503,9 +503,7 @@ public class StickyListHeadersListView extends FrameLayout {\n \tprivate int getHeaderOverlap(int position) {\n \t\tboolean isStartOfSection = isStartOfSection(position);\n \t\tif (!isStartOfSection) {\n-\t\t\tView header = mAdapter.getHeaderView(position, null, mList);\n-\t\t\theader.setLayoutParams(new ViewGroup.LayoutParams(\n-\t\t\t\t\tLayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));\n+\t\t\tView header = mAdapter.getView(position, null, mList);\n \n \t\t\tfinal int width = getWidth();\n \t\t\tfinal int parentWidthMeasureSpec = MeasureSpec.makeMeasureSpec(\n",
          "label": "fix"
        },
        {
          "change": "diff --git a/OsmAnd/src/net/osmand/plus/dashboard/DashFavoritesFragment.java b/OsmAnd/src/net/osmand/plus/dashboard/DashFavoritesFragment.java\nindex 6e104d6e79..2dd93a97b3 100644\n--- a/OsmAnd/src/net/osmand/plus/dashboard/DashFavoritesFragment.java\n+++ b/OsmAnd/src/net/osmand/plus/dashboard/DashFavoritesFragment.java\n@@ -87,7 +87,7 @@ public class DashFavoritesFragment extends DashBaseFragment {\n \n \n \n-\tprivate void setupFavorites(){\n+\tpublic void setupFavorites(){\n \t\tView mainView = getView();\n \t\tfinal FavouritesDbHelper helper = getMyApplication().getFavorites();\n \t\tpoints = new ArrayList<FavouritePoint>(helper.getFavouritePoints());\n",
          "label": "refactor"
        },
        {
          "change": "diff --git a/src/main/java/org/bukkit/command/defaults/GameModeCommand.java b/src/main/java/org/bukkit/command/defaults/GameModeCommand.java\nindex 08e5a90a..ad445160 100644\n--- a/src/main/java/org/bukkit/command/defaults/GameModeCommand.java\n+++ b/src/main/java/org/bukkit/command/defaults/GameModeCommand.java\n@@ -58,9 +58,9 @@ public class GameModeCommand extends VanillaCommand {\n                     sender.sendMessage(\"Game mode change for \" + player.getName() + \" failed!\");\n                 } else {\n                     if (player == sender) {\n-                        Command.broadcastCommandMessage(sender, \"Set own game mode to\" + mode.toString() + \" mode\", false);\n+                        Command.broadcastCommandMessage(sender, \"Set own game mode to \" + mode.toString() + \" mode\", false);\n                     } else {\n-                        Command.broadcastCommandMessage(sender, \"Set \" + player.getName() + \"'s game mode to\" + mode.toString() + \" mode\", false);\n+                        Command.broadcastCommandMessage(sender, \"Set \" + player.getName() + \"'s game mode to \" + mode.toString() + \" mode\", false);\n                     }\n                 }\n             } else {\n",
          "label": "style"
        }
      ]
    },
    {
      "tangleChange": "diff --git a/subprojects/groovy-templates/src/main/groovy/groovy/text/markup/MarkupTemplateEngine.java b/subprojects/groovy-templates/src/main/groovy/groovy/text/markup/MarkupTemplateEngine.java\nindex 0c439f3e5..c02de8cb9 100644\n--- a/subprojects/groovy-templates/src/main/groovy/groovy/text/markup/MarkupTemplateEngine.java\n+++ b/subprojects/groovy-templates/src/main/groovy/groovy/text/markup/MarkupTemplateEngine.java\n@@ -39,6 +39,8 @@ import java.io.StringReader;\n import java.net.MalformedURLException;\n import java.net.URL;\n import java.net.URLClassLoader;\n+import java.security.AccessController;\n+import java.security.PrivilegedAction;\n import java.util.Collections;\n import java.util.Map;\n import java.util.concurrent.atomic.AtomicLong;\n@@ -62,7 +64,7 @@ public class MarkupTemplateEngine extends TemplateEngine {\n         this(MarkupTemplateEngine.class.getClassLoader(), new TemplateConfiguration());\n     }\n \n-    public MarkupTemplateEngine(ClassLoader parentLoader, TemplateConfiguration tplConfig) {\n+    public MarkupTemplateEngine(final ClassLoader parentLoader, final TemplateConfiguration tplConfig) {\n         compilerConfiguration = new CompilerConfiguration();\n         templateConfiguration = tplConfig;\n         compilerConfiguration.addCompilationCustomizers(new TemplateASTTransformer(tplConfig));\n@@ -78,7 +80,11 @@ public class MarkupTemplateEngine extends TemplateEngine {\n                     }\n             );\n         }\n-        groovyClassLoader = new TemplateGroovyClassLoader(parentLoader, compilerConfiguration);\n+        groovyClassLoader = AccessController.doPrivileged(new PrivilegedAction<TemplateGroovyClassLoader>() {\n+            public TemplateGroovyClassLoader run() {\n+                return new TemplateGroovyClassLoader(parentLoader, compilerConfiguration);\n+            }\n+        });\n     }\n \n     /**\n\ndiff --git a/subprojects/core/src/main/groovy/org/gradle/internal/filewatch/FileWatchInputs.java b/subprojects/core/src/main/groovy/org/gradle/internal/filewatch/FileWatchInputs.java\nindex 6d491ae..2073210 100644\n--- a/subprojects/core/src/main/groovy/org/gradle/internal/filewatch/FileWatchInputs.java\n+++ b/subprojects/core/src/main/groovy/org/gradle/internal/filewatch/FileWatchInputs.java\n@@ -35,7 +35,9 @@ public class FileWatchInputs {\n         return directories;\n     }\n \n-    public List<File> getFiles() { return files; }\n+    public List<File> getFiles() {\n+        return files;\n+    }\n \n     public static Builder newBuilder() {\n         return new Builder();\n\ndiff --git a/translator/src/main/java/com/google/devtools/j2objc/gen/ObjectiveCImplementationGenerator.java b/translator/src/main/java/com/google/devtools/j2objc/gen/ObjectiveCImplementationGenerator.java\nindex 806d2b0..b4871c6 100644\n--- a/translator/src/main/java/com/google/devtools/j2objc/gen/ObjectiveCImplementationGenerator.java\n+++ b/translator/src/main/java/com/google/devtools/j2objc/gen/ObjectiveCImplementationGenerator.java\n@@ -1065,7 +1065,7 @@ public class ObjectiveCImplementationGenerator extends ObjectiveCSourceFileGener\n     } else if (value instanceof String) {\n       StringLiteral node = ast.newStringLiteral();\n       node.setLiteralValue((String) value);\n-      printf(StatementGenerator.generateStringLiteral(node));\n+      print(StatementGenerator.generateStringLiteral(node));\n     } else if (value instanceof Number || value instanceof Character || value instanceof Boolean) {\n       print(value.toString());\n     } else if (value.getClass().isArray()) {\n",
      "atomicChanges": [
        {
          "change": "diff --git a/subprojects/groovy-templates/src/main/groovy/groovy/text/markup/MarkupTemplateEngine.java b/subprojects/groovy-templates/src/main/groovy/groovy/text/markup/MarkupTemplateEngine.java\nindex 0c439f3e5..c02de8cb9 100644\n--- a/subprojects/groovy-templates/src/main/groovy/groovy/text/markup/MarkupTemplateEngine.java\n+++ b/subprojects/groovy-templates/src/main/groovy/groovy/text/markup/MarkupTemplateEngine.java\n@@ -39,6 +39,8 @@ import java.io.StringReader;\n import java.net.MalformedURLException;\n import java.net.URL;\n import java.net.URLClassLoader;\n+import java.security.AccessController;\n+import java.security.PrivilegedAction;\n import java.util.Collections;\n import java.util.Map;\n import java.util.concurrent.atomic.AtomicLong;\n@@ -62,7 +64,7 @@ public class MarkupTemplateEngine extends TemplateEngine {\n         this(MarkupTemplateEngine.class.getClassLoader(), new TemplateConfiguration());\n     }\n \n-    public MarkupTemplateEngine(ClassLoader parentLoader, TemplateConfiguration tplConfig) {\n+    public MarkupTemplateEngine(final ClassLoader parentLoader, final TemplateConfiguration tplConfig) {\n         compilerConfiguration = new CompilerConfiguration();\n         templateConfiguration = tplConfig;\n         compilerConfiguration.addCompilationCustomizers(new TemplateASTTransformer(tplConfig));\n@@ -78,7 +80,11 @@ public class MarkupTemplateEngine extends TemplateEngine {\n                     }\n             );\n         }\n-        groovyClassLoader = new TemplateGroovyClassLoader(parentLoader, compilerConfiguration);\n+        groovyClassLoader = AccessController.doPrivileged(new PrivilegedAction<TemplateGroovyClassLoader>() {\n+            public TemplateGroovyClassLoader run() {\n+                return new TemplateGroovyClassLoader(parentLoader, compilerConfiguration);\n+            }\n+        });\n     }\n \n     /**\n",
          "label": "refactor"
        },
        {
          "change": "diff --git a/subprojects/core/src/main/groovy/org/gradle/internal/filewatch/FileWatchInputs.java b/subprojects/core/src/main/groovy/org/gradle/internal/filewatch/FileWatchInputs.java\nindex 6d491ae..2073210 100644\n--- a/subprojects/core/src/main/groovy/org/gradle/internal/filewatch/FileWatchInputs.java\n+++ b/subprojects/core/src/main/groovy/org/gradle/internal/filewatch/FileWatchInputs.java\n@@ -35,7 +35,9 @@ public class FileWatchInputs {\n         return directories;\n     }\n \n-    public List<File> getFiles() { return files; }\n+    public List<File> getFiles() {\n+        return files;\n+    }\n \n     public static Builder newBuilder() {\n         return new Builder();\n",
          "label": "style"
        },
        {
          "change": "diff --git a/translator/src/main/java/com/google/devtools/j2objc/gen/ObjectiveCImplementationGenerator.java b/translator/src/main/java/com/google/devtools/j2objc/gen/ObjectiveCImplementationGenerator.java\nindex 806d2b0..b4871c6 100644\n--- a/translator/src/main/java/com/google/devtools/j2objc/gen/ObjectiveCImplementationGenerator.java\n+++ b/translator/src/main/java/com/google/devtools/j2objc/gen/ObjectiveCImplementationGenerator.java\n@@ -1065,7 +1065,7 @@ public class ObjectiveCImplementationGenerator extends ObjectiveCSourceFileGener\n     } else if (value instanceof String) {\n       StringLiteral node = ast.newStringLiteral();\n       node.setLiteralValue((String) value);\n-      printf(StatementGenerator.generateStringLiteral(node));\n+      print(StatementGenerator.generateStringLiteral(node));\n     } else if (value instanceof Number || value instanceof Character || value instanceof Boolean) {\n       print(value.toString());\n     } else if (value.getClass().isArray()) {\n",
          "label": "fix"
        }
      ]
    },
    {
      "tangleChange": "diff --git a/java/org/apache/tomcat/util/file/ConfigFileLoader.java b/java/org/apache/tomcat/util/file/ConfigFileLoader.java\nindex 1f1f4039d..1b0b63da0 100644\n--- a/java/org/apache/tomcat/util/file/ConfigFileLoader.java\n+++ b/java/org/apache/tomcat/util/file/ConfigFileLoader.java\n@@ -33,7 +33,7 @@ public class ConfigFileLoader {\n     private static final URI CATALINA_BASE_URI;\n \n     static {\n-        File catalinaBase = new File(\"\");\n+        File catalinaBase = new File(System.getProperty(\"catalina.base\"));\n         CATALINA_BASE_URI = catalinaBase.toURI();\n     }\n \n\ndiff --git a/jps/jps-builders/src/org/jetbrains/jps/builders/impl/BuildOutputConsumerImpl.java b/jps/jps-builders/src/org/jetbrains/jps/builders/impl/BuildOutputConsumerImpl.java\nindex 4c89b33..d82921a 100644\n--- a/jps/jps-builders/src/org/jetbrains/jps/builders/impl/BuildOutputConsumerImpl.java\n+++ b/jps/jps-builders/src/org/jetbrains/jps/builders/impl/BuildOutputConsumerImpl.java\n@@ -51,7 +51,8 @@ public class BuildOutputConsumerImpl implements BuildOutputConsumer {\n     for (File outputRoot : myOutputs) {\n       String outputRootPath = FileUtil.toSystemIndependentName(outputRoot.getPath());\n       final String relativePath = FileUtil.getRelativePath(outputRootPath, outputFilePath, '/');\n-      if (relativePath != null) {\n+      if (relativePath != null && !relativePath.startsWith(\"..\")) {\n+        // the relative path must be under the root or equal to it\n         myFileGeneratedEvent.add(outputRootPath, relativePath);\n       }\n     }\n\ndiff --git a/src/main/java/org/bukkit/command/defaults/GameModeCommand.java b/src/main/java/org/bukkit/command/defaults/GameModeCommand.java\nindex 08e5a90a..ad445160 100644\n--- a/src/main/java/org/bukkit/command/defaults/GameModeCommand.java\n+++ b/src/main/java/org/bukkit/command/defaults/GameModeCommand.java\n@@ -58,9 +58,9 @@ public class GameModeCommand extends VanillaCommand {\n                     sender.sendMessage(\"Game mode change for \" + player.getName() + \" failed!\");\n                 } else {\n                     if (player == sender) {\n-                        Command.broadcastCommandMessage(sender, \"Set own game mode to\" + mode.toString() + \" mode\", false);\n+                        Command.broadcastCommandMessage(sender, \"Set own game mode to \" + mode.toString() + \" mode\", false);\n                     } else {\n-                        Command.broadcastCommandMessage(sender, \"Set \" + player.getName() + \"'s game mode to\" + mode.toString() + \" mode\", false);\n+                        Command.broadcastCommandMessage(sender, \"Set \" + player.getName() + \"'s game mode to \" + mode.toString() + \" mode\", false);\n                     }\n                 }\n             } else {\n",
      "atomicChanges": [
        {
          "change": "diff --git a/java/org/apache/tomcat/util/file/ConfigFileLoader.java b/java/org/apache/tomcat/util/file/ConfigFileLoader.java\nindex 1f1f4039d..1b0b63da0 100644\n--- a/java/org/apache/tomcat/util/file/ConfigFileLoader.java\n+++ b/java/org/apache/tomcat/util/file/ConfigFileLoader.java\n@@ -33,7 +33,7 @@ public class ConfigFileLoader {\n     private static final URI CATALINA_BASE_URI;\n \n     static {\n-        File catalinaBase = new File(\"\");\n+        File catalinaBase = new File(System.getProperty(\"catalina.base\"));\n         CATALINA_BASE_URI = catalinaBase.toURI();\n     }\n \n",
          "label": "refactor"
        },
        {
          "change": "diff --git a/jps/jps-builders/src/org/jetbrains/jps/builders/impl/BuildOutputConsumerImpl.java b/jps/jps-builders/src/org/jetbrains/jps/builders/impl/BuildOutputConsumerImpl.java\nindex 4c89b33..d82921a 100644\n--- a/jps/jps-builders/src/org/jetbrains/jps/builders/impl/BuildOutputConsumerImpl.java\n+++ b/jps/jps-builders/src/org/jetbrains/jps/builders/impl/BuildOutputConsumerImpl.java\n@@ -51,7 +51,8 @@ public class BuildOutputConsumerImpl implements BuildOutputConsumer {\n     for (File outputRoot : myOutputs) {\n       String outputRootPath = FileUtil.toSystemIndependentName(outputRoot.getPath());\n       final String relativePath = FileUtil.getRelativePath(outputRootPath, outputFilePath, '/');\n-      if (relativePath != null) {\n+      if (relativePath != null && !relativePath.startsWith(\"..\")) {\n+        // the relative path must be under the root or equal to it\n         myFileGeneratedEvent.add(outputRootPath, relativePath);\n       }\n     }\n",
          "label": "fix"
        },
        {
          "change": "diff --git a/src/main/java/org/bukkit/command/defaults/GameModeCommand.java b/src/main/java/org/bukkit/command/defaults/GameModeCommand.java\nindex 08e5a90a..ad445160 100644\n--- a/src/main/java/org/bukkit/command/defaults/GameModeCommand.java\n+++ b/src/main/java/org/bukkit/command/defaults/GameModeCommand.java\n@@ -58,9 +58,9 @@ public class GameModeCommand extends VanillaCommand {\n                     sender.sendMessage(\"Game mode change for \" + player.getName() + \" failed!\");\n                 } else {\n                     if (player == sender) {\n-                        Command.broadcastCommandMessage(sender, \"Set own game mode to\" + mode.toString() + \" mode\", false);\n+                        Command.broadcastCommandMessage(sender, \"Set own game mode to \" + mode.toString() + \" mode\", false);\n                     } else {\n-                        Command.broadcastCommandMessage(sender, \"Set \" + player.getName() + \"'s game mode to\" + mode.toString() + \" mode\", false);\n+                        Command.broadcastCommandMessage(sender, \"Set \" + player.getName() + \"'s game mode to \" + mode.toString() + \" mode\", false);\n                     }\n                 }\n             } else {\n",
          "label": "style"
        }
      ]
    },
    {
      "tangleChange": "diff --git a/helios-testing/src/main/java/com/spotify/helios/testing/HeliosSoloDeployment.java b/helios-testing/src/main/java/com/spotify/helios/testing/HeliosSoloDeployment.java\nindex 463d3f5c..14cd327e 100644\n--- a/helios-testing/src/main/java/com/spotify/helios/testing/HeliosSoloDeployment.java\n+++ b/helios-testing/src/main/java/com/spotify/helios/testing/HeliosSoloDeployment.java\n@@ -63,7 +63,7 @@ public class HeliosSoloDeployment implements HeliosDeployment {\n \n   public static final String BOOT2DOCKER_SIGNATURE = \"Boot2Docker\";\n   public static final String PROBE_IMAGE = \"onescience/alpine:latest\";\n-  public static final String HELIOS_NAME_PREFIX = \"solo.local.\";\n+  public static final String HELIOS_NAME_SUFFIX = \".solo.local\"; //  Required for SkyDNS discovery.\n   public static final String HELIOS_CONTAINER_PREFIX = \"helios-solo-container-\";\n   public static final int HELIOS_MASTER_PORT = 5801;\n \n@@ -270,7 +270,7 @@ public class HeliosSoloDeployment implements HeliosDeployment {\n     //TODO(negz): Don't make this.env immutable so early?\n     final List<String> env = new ArrayList<>();\n     env.addAll(this.env);\n-    env.add(\"HELIOS_NAME=\" + HELIOS_NAME_PREFIX + this.namespace);\n+    env.add(\"HELIOS_NAME=\" + this.namespace + HELIOS_NAME_SUFFIX);\n     env.add(\"HOST_ADDRESS=\" + heliosHost);\n \n     final String heliosPort = String.format(\"%d/tcp\", HELIOS_MASTER_PORT);\n\ndiff --git a/jphp-runtime/src/php/runtime/invoke/InvokeHelper.java b/jphp-runtime/src/php/runtime/invoke/InvokeHelper.java\nindex a4a4ef68..11fc8c3c 100644\n--- a/jphp-runtime/src/php/runtime/invoke/InvokeHelper.java\n+++ b/jphp-runtime/src/php/runtime/invoke/InvokeHelper.java\n@@ -70,7 +70,7 @@ final public class InvokeHelper {\n     public static Memory[] makeArguments(Environment env, Memory[] args,\n                                        ParameterEntity[] parameters,\n                                        String originClassName, String originMethodName,\n-                                       TraceInfo trace){\n+                                       TraceInfo trace) {\n         return InvokeArgumentHelper.makeArguments(env, args, parameters, originClassName, originMethodName, trace);\n     }\n \n\ndiff --git a/tooling/maven/camel-api-component-maven-plugin/src/main/java/org/apache/camel/maven/ApiComponentGeneratorMojo.java b/tooling/maven/camel-api-component-maven-plugin/src/main/java/org/apache/camel/maven/ApiComponentGeneratorMojo.java\nindex 3f32b0b757..6171c03cda 100644\n--- a/tooling/maven/camel-api-component-maven-plugin/src/main/java/org/apache/camel/maven/ApiComponentGeneratorMojo.java\n+++ b/tooling/maven/camel-api-component-maven-plugin/src/main/java/org/apache/camel/maven/ApiComponentGeneratorMojo.java\n@@ -98,14 +98,9 @@ public class ApiComponentGeneratorMojo extends AbstractApiMethodBaseMojo {\n                     }\n                 }\n \n-                // if set, merge common aliases with proxy's aliases\n-                if (!aliases.isEmpty()) {\n-                    final List<ApiMethodAlias> apiAliases = api.getAliases();\n-                    if (apiAliases.isEmpty()) {\n-                        api.setAliases(aliases);\n-                    } else {\n-                        apiAliases.addAll(aliases);\n-                    }\n+                // set common aliases if needed\n+                if (!aliases.isEmpty() && api.getAliases().isEmpty()) {\n+                    api.setAliases(aliases);\n                 }\n             }\n \n",
      "atomicChanges": [
        {
          "change": "diff --git a/helios-testing/src/main/java/com/spotify/helios/testing/HeliosSoloDeployment.java b/helios-testing/src/main/java/com/spotify/helios/testing/HeliosSoloDeployment.java\nindex 463d3f5c..14cd327e 100644\n--- a/helios-testing/src/main/java/com/spotify/helios/testing/HeliosSoloDeployment.java\n+++ b/helios-testing/src/main/java/com/spotify/helios/testing/HeliosSoloDeployment.java\n@@ -63,7 +63,7 @@ public class HeliosSoloDeployment implements HeliosDeployment {\n \n   public static final String BOOT2DOCKER_SIGNATURE = \"Boot2Docker\";\n   public static final String PROBE_IMAGE = \"onescience/alpine:latest\";\n-  public static final String HELIOS_NAME_PREFIX = \"solo.local.\";\n+  public static final String HELIOS_NAME_SUFFIX = \".solo.local\"; //  Required for SkyDNS discovery.\n   public static final String HELIOS_CONTAINER_PREFIX = \"helios-solo-container-\";\n   public static final int HELIOS_MASTER_PORT = 5801;\n \n@@ -270,7 +270,7 @@ public class HeliosSoloDeployment implements HeliosDeployment {\n     //TODO(negz): Don't make this.env immutable so early?\n     final List<String> env = new ArrayList<>();\n     env.addAll(this.env);\n-    env.add(\"HELIOS_NAME=\" + HELIOS_NAME_PREFIX + this.namespace);\n+    env.add(\"HELIOS_NAME=\" + this.namespace + HELIOS_NAME_SUFFIX);\n     env.add(\"HOST_ADDRESS=\" + heliosHost);\n \n     final String heliosPort = String.format(\"%d/tcp\", HELIOS_MASTER_PORT);\n",
          "label": "fix"
        },
        {
          "change": "diff --git a/jphp-runtime/src/php/runtime/invoke/InvokeHelper.java b/jphp-runtime/src/php/runtime/invoke/InvokeHelper.java\nindex a4a4ef68..11fc8c3c 100644\n--- a/jphp-runtime/src/php/runtime/invoke/InvokeHelper.java\n+++ b/jphp-runtime/src/php/runtime/invoke/InvokeHelper.java\n@@ -70,7 +70,7 @@ final public class InvokeHelper {\n     public static Memory[] makeArguments(Environment env, Memory[] args,\n                                        ParameterEntity[] parameters,\n                                        String originClassName, String originMethodName,\n-                                       TraceInfo trace){\n+                                       TraceInfo trace) {\n         return InvokeArgumentHelper.makeArguments(env, args, parameters, originClassName, originMethodName, trace);\n     }\n \n",
          "label": "style"
        },
        {
          "change": "diff --git a/tooling/maven/camel-api-component-maven-plugin/src/main/java/org/apache/camel/maven/ApiComponentGeneratorMojo.java b/tooling/maven/camel-api-component-maven-plugin/src/main/java/org/apache/camel/maven/ApiComponentGeneratorMojo.java\nindex 3f32b0b757..6171c03cda 100644\n--- a/tooling/maven/camel-api-component-maven-plugin/src/main/java/org/apache/camel/maven/ApiComponentGeneratorMojo.java\n+++ b/tooling/maven/camel-api-component-maven-plugin/src/main/java/org/apache/camel/maven/ApiComponentGeneratorMojo.java\n@@ -98,14 +98,9 @@ public class ApiComponentGeneratorMojo extends AbstractApiMethodBaseMojo {\n                     }\n                 }\n \n-                // if set, merge common aliases with proxy's aliases\n-                if (!aliases.isEmpty()) {\n-                    final List<ApiMethodAlias> apiAliases = api.getAliases();\n-                    if (apiAliases.isEmpty()) {\n-                        api.setAliases(aliases);\n-                    } else {\n-                        apiAliases.addAll(aliases);\n-                    }\n+                // set common aliases if needed\n+                if (!aliases.isEmpty() && api.getAliases().isEmpty()) {\n+                    api.setAliases(aliases);\n                 }\n             }\n \n",
          "label": "refactor"
        }
      ]
    },
    {
      "tangleChange": "diff --git a/src/org/geometerplus/android/fbreader/DisplayBookPopupAction.java b/src/org/geometerplus/android/fbreader/DisplayBookPopupAction.java\nindex 4fc0f9328..f6b936d73 100644\n--- a/src/org/geometerplus/android/fbreader/DisplayBookPopupAction.java\n+++ b/src/org/geometerplus/android/fbreader/DisplayBookPopupAction.java\n@@ -105,10 +105,8 @@ class DisplayBookPopupAction extends FBAndroidAction {\n \t\t\t}\n \t\t});\n \n-\t\tif (Build.VERSION.SDK_INT < Build.VERSION_CODES.LOLLIPOP) {\n-\t\t\tdownloadButton.setTextColor(0xFF777777);\n-\t\t\tcancelButton.setTextColor(0xFF777777);\n-\t\t}\n+\t\tdownloadButton.setTextColor(0xFF777777);\n+\t\tcancelButton.setTextColor(0xFF777777);\n \n \t\tpopup.setOnDismissListener(new PopupWindow.OnDismissListener() {\n \t\t\tpublic void onDismiss() {\n\ndiff --git a/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultBuildSuccessResult.java b/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultBuildSuccessResult.java\nindex d0f4734..8ab8aca 100644\n--- a/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultBuildSuccessResult.java\n+++ b/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultBuildSuccessResult.java\n@@ -21,5 +21,4 @@ public class DefaultBuildSuccessResult extends AbstractBuildResult implements In\n     public DefaultBuildSuccessResult(long startTime, long endTime) {\n         super(startTime, endTime, \"succeeded\");\n     }\n-\n }\ndiff --git a/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultTaskSuccessResult.java b/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultTaskSuccessResult.java\nindex 2545e1b..8ffe007 100644\n--- a/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultTaskSuccessResult.java\n+++ b/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultTaskSuccessResult.java\n@@ -19,9 +19,7 @@ package org.gradle.tooling.internal.provider.events;\n import org.gradle.tooling.internal.protocol.events.InternalTaskSuccessResult;\n \n public class DefaultTaskSuccessResult extends AbstractTaskResult implements InternalTaskSuccessResult {\n-\n     public DefaultTaskSuccessResult(long startTime, long endTime, String outcomeDescription) {\n         super(startTime, endTime, outcomeDescription);\n     }\n-\n }\ndiff --git a/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultTestSkippedResult.java b/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultTestSkippedResult.java\nindex 1b4db01..5b99515 100644\n--- a/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultTestSkippedResult.java\n+++ b/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultTestSkippedResult.java\n@@ -19,9 +19,7 @@ package org.gradle.tooling.internal.provider.events;\n import org.gradle.tooling.internal.protocol.events.InternalTestSkippedResult;\n \n public class DefaultTestSkippedResult extends AbstractTestResult implements InternalTestSkippedResult {\n-\n     public DefaultTestSkippedResult(long startTime, long endTime) {\n         super(startTime, endTime, \"skipped\");\n     }\n-\n }\ndiff --git a/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultTestSuccessResult.java b/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultTestSuccessResult.java\nindex 0b48ec4..db657cb 100644\n--- a/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultTestSuccessResult.java\n+++ b/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultTestSuccessResult.java\n@@ -19,9 +19,7 @@ package org.gradle.tooling.internal.provider.events;\n import org.gradle.tooling.internal.protocol.events.InternalTestSuccessResult;\n \n public class DefaultTestSuccessResult extends AbstractTestResult implements InternalTestSuccessResult {\n-\n     public DefaultTestSuccessResult(long startTime, long endTime) {\n         super(startTime, endTime, \"succeeded\");\n     }\n-\n }\n\ndiff --git a/packages/DocumentsUI/src/com/android/documentsui/DirectoryFragment.java b/packages/DocumentsUI/src/com/android/documentsui/DirectoryFragment.java\nindex edf829d..253a4af 100644\n--- a/packages/DocumentsUI/src/com/android/documentsui/DirectoryFragment.java\n+++ b/packages/DocumentsUI/src/com/android/documentsui/DirectoryFragment.java\n@@ -1824,7 +1824,7 @@ public class DirectoryFragment extends Fragment {\n             // position by 1.\n             final int originalPos = position;\n             final int size = mMarkedForDeletion.size();\n-            for (int i = 0; i <= size; ++i) {\n+            for (int i = 0; i < size; ++i) {\n                 // It'd be more concise, but less efficient, to iterate over positions while calling\n                 // mMarkedForDeletion.get.  Instead, iterate over deleted entries.\n                 if (mMarkedForDeletion.keyAt(i) <= position && mMarkedForDeletion.valueAt(i)) {\n",
      "atomicChanges": [
        {
          "change": "diff --git a/src/org/geometerplus/android/fbreader/DisplayBookPopupAction.java b/src/org/geometerplus/android/fbreader/DisplayBookPopupAction.java\nindex 4fc0f9328..f6b936d73 100644\n--- a/src/org/geometerplus/android/fbreader/DisplayBookPopupAction.java\n+++ b/src/org/geometerplus/android/fbreader/DisplayBookPopupAction.java\n@@ -105,10 +105,8 @@ class DisplayBookPopupAction extends FBAndroidAction {\n \t\t\t}\n \t\t});\n \n-\t\tif (Build.VERSION.SDK_INT < Build.VERSION_CODES.LOLLIPOP) {\n-\t\t\tdownloadButton.setTextColor(0xFF777777);\n-\t\t\tcancelButton.setTextColor(0xFF777777);\n-\t\t}\n+\t\tdownloadButton.setTextColor(0xFF777777);\n+\t\tcancelButton.setTextColor(0xFF777777);\n \n \t\tpopup.setOnDismissListener(new PopupWindow.OnDismissListener() {\n \t\t\tpublic void onDismiss() {\n",
          "label": "refactor"
        },
        {
          "change": "diff --git a/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultBuildSuccessResult.java b/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultBuildSuccessResult.java\nindex d0f4734..8ab8aca 100644\n--- a/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultBuildSuccessResult.java\n+++ b/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultBuildSuccessResult.java\n@@ -21,5 +21,4 @@ public class DefaultBuildSuccessResult extends AbstractBuildResult implements In\n     public DefaultBuildSuccessResult(long startTime, long endTime) {\n         super(startTime, endTime, \"succeeded\");\n     }\n-\n }\ndiff --git a/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultTaskSuccessResult.java b/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultTaskSuccessResult.java\nindex 2545e1b..8ffe007 100644\n--- a/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultTaskSuccessResult.java\n+++ b/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultTaskSuccessResult.java\n@@ -19,9 +19,7 @@ package org.gradle.tooling.internal.provider.events;\n import org.gradle.tooling.internal.protocol.events.InternalTaskSuccessResult;\n \n public class DefaultTaskSuccessResult extends AbstractTaskResult implements InternalTaskSuccessResult {\n-\n     public DefaultTaskSuccessResult(long startTime, long endTime, String outcomeDescription) {\n         super(startTime, endTime, outcomeDescription);\n     }\n-\n }\ndiff --git a/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultTestSkippedResult.java b/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultTestSkippedResult.java\nindex 1b4db01..5b99515 100644\n--- a/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultTestSkippedResult.java\n+++ b/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultTestSkippedResult.java\n@@ -19,9 +19,7 @@ package org.gradle.tooling.internal.provider.events;\n import org.gradle.tooling.internal.protocol.events.InternalTestSkippedResult;\n \n public class DefaultTestSkippedResult extends AbstractTestResult implements InternalTestSkippedResult {\n-\n     public DefaultTestSkippedResult(long startTime, long endTime) {\n         super(startTime, endTime, \"skipped\");\n     }\n-\n }\ndiff --git a/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultTestSuccessResult.java b/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultTestSuccessResult.java\nindex 0b48ec4..db657cb 100644\n--- a/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultTestSuccessResult.java\n+++ b/subprojects/launcher/src/main/java/org/gradle/tooling/internal/provider/events/DefaultTestSuccessResult.java\n@@ -19,9 +19,7 @@ package org.gradle.tooling.internal.provider.events;\n import org.gradle.tooling.internal.protocol.events.InternalTestSuccessResult;\n \n public class DefaultTestSuccessResult extends AbstractTestResult implements InternalTestSuccessResult {\n-\n     public DefaultTestSuccessResult(long startTime, long endTime) {\n         super(startTime, endTime, \"succeeded\");\n     }\n-\n }\n",
          "label": "style"
        },
        {
          "change": "diff --git a/packages/DocumentsUI/src/com/android/documentsui/DirectoryFragment.java b/packages/DocumentsUI/src/com/android/documentsui/DirectoryFragment.java\nindex edf829d..253a4af 100644\n--- a/packages/DocumentsUI/src/com/android/documentsui/DirectoryFragment.java\n+++ b/packages/DocumentsUI/src/com/android/documentsui/DirectoryFragment.java\n@@ -1824,7 +1824,7 @@ public class DirectoryFragment extends Fragment {\n             // position by 1.\n             final int originalPos = position;\n             final int size = mMarkedForDeletion.size();\n-            for (int i = 0; i <= size; ++i) {\n+            for (int i = 0; i < size; ++i) {\n                 // It'd be more concise, but less efficient, to iterate over positions while calling\n                 // mMarkedForDeletion.get.  Instead, iterate over deleted entries.\n                 if (mMarkedForDeletion.keyAt(i) <= position && mMarkedForDeletion.valueAt(i)) {\n",
          "label": "fix"
        }
      ]
    }
  ]
}