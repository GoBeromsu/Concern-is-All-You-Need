# Type: cicd
# Subtype: C4
# English Summary: Integrate Docker build and push
# Chinese Summary: 集成docker构建和推送
# Entry Number: 13

# === Git Diff Content ===

diff --git a/.travis.yml b/.travis.yml
index 29d5fa9..2a7fcd4 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -2,12 +2,18 @@ language: node_js
 node_js:
   - "12"
   - "14"
+  - "16"
 
+services:
+  - docker
+
 env:
   global:
     - NODE_ENV=test
 
-matrix:
+jobs:
   include:
     - stage: test
       script: npm test
+    - stage: docker_build
+      script: docker build -t myapp:$TRAVIS_COMMIT .
 
 after_success:
-  - npm run coverage
+  - if [ "$TRAVIS_BRANCH" == "main" ]; then
+      echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin;
+      docker push myapp:$TRAVIS_COMMIT;
+    fi